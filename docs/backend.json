{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the Iligan RouteFinder application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the User entity."
        },
        "username": {
          "type": "string",
          "description": "The user's username."
        },
        "email": {
          "type": "string",
          "description": "The user's email address.",
          "format": "email"
        }
      },
      "required": [
        "id",
        "username",
        "email"
      ]
    },
    "Admin": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Admin",
      "type": "object",
      "description": "Represents an administrator of the Iligan RouteFinder application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Admin entity."
        },
        "username": {
          "type": "string",
          "description": "The admin's username."
        },
        "email": {
          "type": "string",
          "description": "The admin's email address.",
          "format": "email"
        }
      },
      "required": [
        "id",
        "username",
        "email"
      ]
    },
    "Location": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Location",
      "type": "object",
      "description": "Represents a physical location or stop in Iligan City.",
      "properties": {
        "id": {
          "type": "string",
          "description": "A unique, URL-friendly identifier for the location (e.g., 'gaisano-mall')."
        },
        "name": {
          "type": "string",
          "description": "The display name of the location (e.g., 'Gaisano Mall')."
        },
        "coordinates": {
          "type": "object",
          "description": "The geographical coordinates of the location.",
          "properties": {
            "latitude": {
              "type": "number"
            },
            "longitude": {
              "type": "number"
            }
          },
          "required": ["latitude", "longitude"]
        }
      },
      "required": ["id", "name", "coordinates"]
    },
    "Route": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Route",
      "type": "object",
      "description": "Represents a specific jeepney line.",
      "properties": {
        "name": {
          "type": "string",
          "description": "The unique name of the route (e.g., 'iligan-proper-tubod-rosario-heights')."
        },
        "description": {
          "type": "string",
          "description": "A user-friendly description of the route."
        }
      },
      "required": ["name", "description"]
    },
    "RouteSegment": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Route Segment",
      "type": "object",
      "description": "Represents a direct connection (an edge) between two locations on a specific route.",
      "properties": {
        "source": {
          "type": "string",
          "description": "The starting location ID for this segment."
        },
        "target": {
          "type": "string",
          "description": "The ending location ID for this segment."
        },
        "distance": {
          "type": "number",
          "description": "The distance of this segment in kilometers."
        },
        "routeName": {
          "type": "string",
          "description": "The name of the jeepney route this segment belongs to."
        }
      },
      "required": ["source", "target", "distance", "routeName"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores user profile information. Access is restricted to the user's own document.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user, matching the Firebase Auth UID."
            }
          ]
        }
      },
      {
        "path": "/roles_admin/{userId}",
        "definition": {
          "entityName": "Admin",
          "schema": {
            "$ref": "#/backend/entities/Admin"
          },
          "description": "Indicates administrative privileges. Document existence grants admin role to the user ID. Existence over Content. To facilitate simple, robust, and easily debuggable security rules.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user, matching the Firebase Auth UID."
            }
          ]
        }
      },
      {
        "path": "/locations/{locationId}",
        "definition": {
          "entityName": "Location",
          "schema": {
            "$ref": "#/backend/entities/Location"
          },
          "description": "Stores all addressable locations (stops, landmarks). Publicly readable, admin-writable.",
          "params": [
            {
              "name": "locationId",
              "description": "The unique identifier of the location."
            }
          ]
        }
      },
      {
        "path": "/routes/{routeName}",
        "definition": {
          "entityName": "Route",
          "schema": {
            "$ref": "#/backend/entities/Route"
          },
          "description": "Stores all official jeepney lines. Publicly readable, admin-writable.",
          "params": [
            {
              "name": "routeName",
              "description": "The unique identifier of the jeepney route."
            }
          ]
        }
      },
      {
        "path": "/route_segments/{segmentId}",
        "definition": {
          "entityName": "RouteSegment",
          "schema": {
            "$ref": "#/backend/entities/RouteSegment"
          },
          "description": "Stores the individual segments that form the transportation graph. Publicly readable, admin-writable.",
          "params": [
            {
              "name": "segmentId",
              "description": "The unique identifier of the route segment."
            }
          ]
        }
      }
    ]
  }
}
